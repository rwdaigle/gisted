/ %style(type="text/css")
/   :sass
/     ul.search-results
/       list-style-type: none
/       li:nth-child(even)
/         background: #EEE
/       li.selected
/         background: #999

/ %p
/   = form_tag(search_gists_path, :method => "get", :id => "search-form") do
/     = image_tag("#{current_user.gh_avatar_url}&s=25")
/     = text_field_tag(:q, params[:q], :size => 50, :class => "mousetrap")
/     = submit_tag("Search")
/     = "(last indexed: #{current_user.last_gh_fetch ? current_user.last_gh_fetch.to_formatted_s(:short) : "not yet"})"

/ - if @results.size > 0
/   %ul.search-results
/     - for result in @results
/       %li(style="#{search_result_styles(result)}")
/         = search_result_link(result)
/         %span.meta
/           %span.modified-at= "modified #{distance_of_time_in_words_to_now(result.gh_updated_at)} ago"
/           %span.comments= "#{pluralize(result.comment_count, "comments")}"
/         / %p= result.inspect
/ - else
/   %p= "No results found for \"#{params[:q]}\""

.topsearch.command-bar-activated
  = form_tag(search_gists_path, :method => "get", :id => "top_search_form", :class => "command_bar_form") do
    %a.advanced-search.tooltipped.downwards.command-bar-search(href="#")
      %span.mini-icon.mini-icon-advanced-search
    .commandbar.focused
      = text_field_tag(:q, params[:q], :size => 50, :class => "mousetrap", :id => "command-bar", :placeholder => "Search your gists", :tabindex => "1")
      .display(style="display: block;")
        - for result in @results
          .choice
            %span.command= search_result_link(result)
            %span.description= pluralize(result.comment_count, "comments")
    %span.mini-icon.help.tooltipped.downwards(title="Show Command Bar Help") ï€¬
  
  / = submit_tag("Search")
  /   = "(last indexed: #{current_user.last_gh_fetch ? current_user.last_gh_fetch.to_formatted_s(:short) : "not yet"})"

.avatar
  %a(href="#{current_user.gh_url}")
    %img(src="#{current_user.gh_avatar_url}&s=20")