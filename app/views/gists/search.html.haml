%style(type="text/css")
  :sass
    ul.search-results
      list-style-type: none
      li:nth-child(even)
        background: #EEE
      li.selected
        background: #999

%p
  = form_tag(search_gists_path, :method => "get", :id => "search-form") do
    = image_tag("#{current_user.gh_avatar_url}&s=25")
    = text_field_tag(:q, params[:q], :size => 50, :class => "mousetrap")
    = submit_tag("Search")
    = "(last indexed: #{current_user.last_gh_fetch ? current_user.last_gh_fetch.to_formatted_s(:short) : "not yet"})"

- if @results.size > 0
  %ul.search-results
    - for result in @results
      %li(style="#{search_result_styles(result)}")
        = search_result_link(result)
        %span.meta
          %span.modified-at= "modified #{distance_of_time_in_words_to_now(result.gh_updated_at)} ago"
          %span.comments= "#{pluralize(result.comment_count, "comments")}"
        / %p= result.inspect
- else
  %p= "No results found for \"#{params[:q]}\""